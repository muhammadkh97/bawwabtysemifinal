# ุชุญุฏูุซ ูุธุงู ุชุญุฏูุฏ ุงููููุน - Location Picker System

## โ ุงูุชุนุฏููุงุช ุงููููุฐุฉ

### 1. Component ุฌุฏูุฏ: LocationPicker
ุชู ุฅูุดุงุก component ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ูู:
```
components/dashboard/LocationPicker.tsx
```

**ุงููููุฒุงุช:**
- ๐บ๏ธ ุฎุฑูุทุฉ ุชูุงุนููุฉ ูู Google Maps
- ๐ ุชุญุฏูุฏ ุงููููุน ุจุงูููุฑ ุนูู ุงูุฎุฑูุทุฉ
- ๐งญ ุฒุฑ "ูููุนู ุงูุญุงูู" ููุญุตูู ุนูู GPS ุงูุญุงูู
- โ๏ธ ุญููู ุฅุฏุฎุงู ูุฏููุฉ ูุฎุท ุงูุนุฑุถ ูุงูุทูู
- ๐จ ุชุตููู ูุชุฌุงูุจ ูุน ุณูุฉ ุงูุจูุงุจุฉ

### 2. ุฅุถุงูุฉ ูููุญุฉ ุชุญูู ุงูุจุงุฆุน
**ุงูููู:** `app/dashboard/vendor/my-store/page.tsx`

**ุงูุชุนุฏููุงุช:**
- โ ุงุณุชูุฑุงุฏ LocationPicker component
- โ ุฅุถุงูุฉ state ููุฅุญุฏุงุซูุงุช (latitude, longitude)
- โ ุชุญููู ุงูุฅุญุฏุงุซูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุญูุธ ุงูุฅุญุฏุงุซูุงุช ุนูุฏ ุชุญุฏูุซ ุงููุชุฌุฑ
- โ ุฅุถุงูุฉ ูุณู "ุงููููุน ุงูุฌุบุฑุงูู" ูู ุงููุงุฌูุฉ

### 3. ุฅุถุงูุฉ ูููุญุฉ ุชุญูู ุงููุทุนู
**ุงูููู:** `app/dashboard/restaurant/settings/page.tsx`

**ุงูุชุนุฏููุงุช:**
- โ ุงุณุชูุฑุงุฏ LocationPicker component
- โ ุฅุถุงูุฉ state ููุฅุญุฏุงุซูุงุช
- โ ุชุญููู ูุญูุธ ุงูุฅุญุฏุงุซูุงุช
- โ ุฅุถุงูุฉ ูุณู "ุงููููุน ุงูุฌุบุฑุงูู" ุจุนุฏ ุฃููุงุช ุงูุนูู
- โ ููู CSS ูุฎุตุต ูุชูุณูู ุงูุฃููุงู (location-picker.css)

### 4. ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
ูุชู ุญูุธ ุงููููุน ูู 4 ุญููู:
```sql
lat         -- ุฎุท ุงูุนุฑุถ (ุงูุญูู ุงูุฑุฆูุณู)
lng         -- ุฎุท ุงูุทูู (ุงูุญูู ุงูุฑุฆูุณู)
latitude    -- ูุณุฎุฉ ุงุญุชูุงุทูุฉ
longitude   -- ูุณุฎุฉ ุงุญุชูุงุทูุฉ
```

## โ๏ธ ุฎุทูุงุช ุงูุชุซุจูุช ุงููุทููุจุฉ

### 1. ุชุซุจูุช ููุชุจุฉ Google Maps React
ูุฌุจ ุชุซุจูุช ุงูููุชุจุฉ ุงููุงุฒูุฉ:

```bash
npm install @react-google-maps/api
```

ุฃู ุฅุฐุง ููุช ุชุณุชุฎุฏู pnpm:
```bash
pnpm install @react-google-maps/api
```

### 2. ุงูุญุตูู ุนูู Google Maps API Key

#### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุดุฑูุน ูู Google Cloud Console
1. ุงุฐูุจ ุฅูู: https://console.cloud.google.com/
2. ูู ุจุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ ุฃู ุงุฎุชุฑ ูุดุฑูุน ููุฌูุฏ

#### ุงูุฎุทูุฉ 2: ุชูุนูู Google Maps APIs
ูู Google Cloud Consoleุ ูุนูู ูุฐู ุงูู APIs:
- โ Maps JavaScript API
- โ Geocoding API (ุงุฎุชูุงุฑู - ููุจุญุซ ุนู ุงูุนูุงููู)
- โ Places API (ุงุฎุชูุงุฑู - ูุงูุชุฑุงุญุงุช ุงูุฃูุงูู)

#### ุงูุฎุทูุฉ 3: ุฅูุดุงุก API Key
1. ุงุฐูุจ ุฅูู: APIs & Services > Credentials
2. ุงุถุบุท ุนูู "+ CREATE CREDENTIALS"
3. ุงุฎุชุฑ "API key"
4. ุงูุณุฎ ุงูููุชุงุญ

#### ุงูุฎุทูุฉ 4: ุชูููุฏ API Key (ููุฃูุงู)
ูู ุตูุญุฉ Credentials:
1. ุงุถุบุท ุนูู ุงูููุชุงุญ ุงูุฐู ุฃูุดุฃุชู
2. ูู "Application restrictions":
   - ุงุฎุชุฑ "HTTP referrers (web sites)"
   - ุฃุถู ูุทุงูู: `https://yourdomain.com/*`
   - ุฃุถู localhost ููุชุทููุฑ: `http://localhost:3000/*`
3. ูู "API restrictions":
   - ุงุฎุชุฑ "Restrict key"
   - ุงุฎุชุฑ ููุท ุงูู APIs ุงูุชู ุชุญุชุงุฌูุง
4. ุงุญูุธ ุงูุชุบููุฑุงุช

### 3. ุฅุถุงูุฉ API Key ุฅูู ููู ุงูุจูุฆุฉ

ุงูุชุญ ุงูููู `.env.local` ูุญุฏูุซ ูุฐุง ุงูุณุทุฑ:

```env
# ุงุณุชุจุฏู "your_google_maps_api_key_here" ุจููุชุงุญู ุงูุญูููู
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=AIzaSyD...your_actual_key_here
```

โ๏ธ **ููุงุญุธุฉ ูููุฉ**: ูุง ุชุดุงุฑู ูุฐุง ุงูููุชุงุญ ุนูููุง! ุชุฃูุฏ ูู ุฃู `.env.local` ูุถุงู ุฅูู `.gitignore`

### 4. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ

ุจุนุฏ ุชุญุฏูุซ `.env.local`:

```bash
# ุฃููู ุงูุณูุฑูุฑ (Ctrl+C)
# ุซู ุดุบูู ูู ุฌุฏูุฏ
npm run dev
```

## ๐งช ุงุฎุชุจุงุฑ ุงูููุฒุฉ

### 1. ุงุฎุชุจุงุฑ ููุญุฉ ุงูุจุงุฆุน
1. ุณุฌู ุฏุฎูู ูุจุงุฆุน
2. ุงุฐูุจ ุฅูู: Dashboard > ูุชุฌุฑู
3. ูุฑุฑ ููุฃุณูู ุฅูู ูุณู "ุงููููุน ุงูุฌุบุฑุงูู"
4. **ุงุฎุชุจุฑ**:
   - ุงุถุบุท "ูููุนู ุงูุญุงูู" (ุณูุทูุจ ุฅุฐู ุงููููุน)
   - ุฃู ุงุถุบุท ุนูู ุงูุฎุฑูุทุฉ ูุชุญุฏูุฏ ูููุน
   - ุฃู ุฃุฏุฎู ุงูุฅุญุฏุงุซูุงุช ูุฏูููุง
5. ุงุญูุธ ุงูุชุบููุฑุงุช
6. ุชุญูู ูู ุญูุธ ุงูุจูุงูุงุช ุจุงูุฐูุงุจ ููุตูุญุฉ ูุฑุฉ ุฃุฎุฑู

### 2. ุงุฎุชุจุงุฑ ููุญุฉ ุงููุทุนู
1. ุณุฌู ุฏุฎูู ููุทุนู
2. ุงุฐูุจ ุฅูู: Dashboard > ุฅุนุฏุงุฏุงุช ุงููุทุนู
3. ูุฑุฑ ููุฃุณูู ุฅูู ูุณู "ุงููููุน ุงูุฌุบุฑุงูู"
4. ูุฑุฑ ููุณ ุงูุงุฎุชุจุงุฑุงุช

## ๐ ุงูุชุญูู ูู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุดุบู ูุฐุง ุงูุงุณุชุนูุงู ูู Supabase SQL Editor:

```sql
-- ุงูุชุญูู ูู ุจูุงูุงุช ุงูููุงูุน
SELECT 
    id,
    store_name,
    address,
    lat,
    lng,
    latitude,
    longitude,
    ST_AsText(location) as postgis_location
FROM stores
WHERE user_id = 'your-user-id'
LIMIT 5;
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฎุฑูุทุฉ ูุง ุชุธูุฑ
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. โ API Key ุบูุฑ ุตุญูุญ
   - **ุงูุญู**: ุชุญูู ูู ุงูููุชุงุญ ูู `.env.local`
2. โ API ุบูุฑ ููุนู ูู Google Cloud
   - **ุงูุญู**: ูุนูู "Maps JavaScript API"
3. โ ูู ูุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ
   - **ุงูุญู**: ุฃููู ูุดุบู ุงูุณูุฑูุฑ ูุฑุฉ ุฃุฎุฑู
4. โ Billing ุบูุฑ ููุนู ูู Google Cloud
   - **ุงูุญู**: ุฃุถู ุจุทุงูุฉ ุฏูุน (Google ูุนุทู $200 ูุฑูุฏูุช ูุฌุงูู)

### ุฒุฑ "ูููุนู ุงูุญุงูู" ูุง ูุนูู
**ุงูุณุจุจ**: ุงููุชุตูุญ ูุง ูุณูุญ ุจุงููุตูู ููู GPS
**ุงูุญู**: 
- ุชุฃูุฏ ูู ุฃู ุงููููุน (https) ูููุณ (http)
- ูู localhostุ ุงุณุชุฎุฏู `http://localhost:3000` (ูุณููุญ)
- ุงุถุบุท ุนูู ุฃููููุฉ ุงูููู ุจุฌุงูุจ URL ูุงููุญ ุฅุฐู ุงููููุน

### ุงูุจูุงูุงุช ูุง ุชูุญูุธ
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. โ ุงูุญููู `lat`, `lng` ุบูุฑ ููุฌูุฏุฉ ูู ุฌุฏูู `stores`
   - **ุงูุญู**: ุดุบูู migration script (ุณูุชู ุฅูุดุงุคู ูู ุงูุฎุทูุฉ ุงูุชุงููุฉ)
2. โ RLS policies ูุง ุชุณูุญ ุจุงูุชุญุฏูุซ
   - **ุงูุญู**: ุชุญูู ูู policies ูู Supabase

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุฅูุดุงุก Migration Script
ุณุฃููู ุจุฅูุดุงุก ุณูุฑุจุช SQL ุดุงูู ูููู ุจู:
- โ ุฅุถุงูุฉ ุญููู ุงููููุน ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ
- โ ุชูุญูุฏ ุฃุณูุงุก ุงูุฃุนูุฏุฉ (lat/latitude, lng/longitude)
- โ ูุฒุงููุฉ ุงูุจูุงูุงุช ุฅูู PostGIS `location` column
- โ ุฅุถุงูุฉ constraints ููุชุญูู ูู ุตุญุฉ ุงูุฅุญุฏุงุซูุงุช
- โ ุฅูุดุงุก/ุชุญุฏูุซ spatial indexes
- โ ุฅุถุงูุฉ triggers ูููุฒุงููุฉ ุงูุชููุงุฆูุฉ

### 2. ุชุญุฏูุซ ููุฒุงุช ุงููููุน ุงูุฃุฎุฑู
- ุญุณุงุจ ุงููุณุงูุฉ ูู ุงูุนููู
- ุงูุจุญุซ ุนู ุฃูุฑุจ ุงููุชุงุฌุฑ/ุงููุทุงุนู
- ุนุฑุถ ุงููุชุงุฌุฑ ุนูู ุงูุฎุฑูุทุฉ ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- ุฅุถุงูุฉ ุงููููุน ููุทูุจุงุช (delivery location)

### 3. ุฅุถุงูุฉ Geocoding (ุชุญููู ุงูุนููุงู ุฅูู ุฅุญุฏุงุซูุงุช)
- ุนูุฏ ูุชุงุจุฉ ุงูุนููุงูุ ูุชู ุงูุชุฑุงุญ ุฅุญุฏุงุซูุงุช ุชููุงุฆููุง
- autocomplete ููุนูุงููู

## ๐ฑ ุงุณุชุฎุฏุงู ุงูููุฒุฉ

### ููุจุงุฆุน/ุงููุทุนู:
1. ุงูุชุญ ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงููุชุฌุฑ/ุงููุทุนู
2. ูุฑุฑ ููุฃุณูู ุฅูู "ุงููููุน ุงูุฌุบุฑุงูู"
3. ุงุณุชุฎุฏู ุฅุญุฏู ุงูุทุฑู:
   - **ุทุฑููุฉ ุณุฑูุนุฉ**: ุงุถุบุท "ูููุนู ุงูุญุงูู"
   - **ุทุฑููุฉ ุฏูููุฉ**: ุงุถุบุท ุนูู ูููุนู ุนูู ุงูุฎุฑูุทุฉ
   - **ุทุฑููุฉ ูุฏููุฉ**: ุฃุฏุฎู ุงูุฅุญุฏุงุซูุงุช ูุจุงุดุฑุฉ
4. ุงุญูุธ ุงูุชุบููุฑุงุช

### ููุนููุงุก (ูุงุฏู):
- ุนุฑุถ ุงููุชุงุฌุฑ ุงููุฑูุจุฉ
- ุญุณุงุจ ููุช ุงูุชูุตูู ุจูุงุกู ุนูู ุงููุณุงูุฉ
- ููุชุฑุฉ ุงููุชุงุฌุฑ ุญุณุจ ุงููุณุงูุฉ

## ๐ฏ ุงูููุงุฆุฏ

### ูููุธุงู:
- โ ุจูุงูุงุช ูููุน ุฏูููุฉ ููู ูุชุฌุฑ/ูุทุนู
- โ ุชูููู ููุฒุงุช ุงูุจุญุซ ุงูุฌุบุฑุงูู
- โ ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

### ููุจุงุฆุนูู/ุงููุทุงุนู:
- โ ุณูููุฉ ุชุญุฏูุฏ ุงููููุน ุจุฏูู ูุชุงุจุฉ ุฅุญุฏุงุซูุงุช
- โ ุฏูุฉ ูู ุชุญุฏูุฏ ุงููููุน
- โ ุธููุฑ ูู ูุชุงุฆุฌ ุงูุจุญุซ ุงูุฌุบุฑุงูู

### ููุนููุงุก:
- โ ุฅูุฌุงุฏ ุฃูุฑุจ ุงููุชุงุฌุฑ/ุงููุทุงุนู
- โ ูุนุฑูุฉ ุงููุณุงูุฉ ูููุช ุงูุชูุตูู ุงููุชููุน
- โ ุฑุคูุฉ ุงููุชุงุฌุฑ ุนูู ุงูุฎุฑูุทุฉ

## ๐ ุงูุฃูุงู

### ุญูุงูุฉ API Key:
- โ ููููุฏ ุจุงููุทุงู (domain restriction)
- โ ููููุฏ ุจุงูู APIs ุงููุณุชุฎุฏูุฉ ููุท
- โ ูุง ููุญูุธ ูู Git (.env.local ูู .gitignore)

### ุญูุงูุฉ ุงูุจูุงูุงุช:
- โ RLS policies ุชููุน ุงูุชุนุฏูู ุบูุฑ ุงููุตุฑุญ
- โ Validation ูู ุงูู frontend ูุงูู backend
- โ Constraints ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู console logs ูู ุงููุชุตูุญ (F12)
2. ุชุญูู ูู logs ูู terminal
3. ุฑุงุฌุน ูุณู "ุงุณุชูุดุงู ุงูุฃุฎุทุงุก" ุฃุนูุงู
4. ุดุบู diagnostic script (ุณูุชู ุฅูุดุงุคู)

---

**ุญุงูุฉ ุงูููุฒุฉ:** โ ุฌุงูุฒุฉ ููุงุฎุชุจุงุฑ ุจุนุฏ ุชุซุจูุช ุงูููุชุจุฉ ูุฅุถุงูุฉ API Key

**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุชุซุจูุช `@react-google-maps/api` ูุฅุถุงูุฉ Google Maps API Key
