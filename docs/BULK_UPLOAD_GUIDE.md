# ุฏููู ุงูุฑูุน ุงูุฌูุงุนู ููููุชุฌุงุช ๐ค

## โ ุงูุชุบููุฑุงุช ุงูููุชููุฉ

### 1. ุฅุฒุงูุฉ ุงูุจูุงูุงุช ุงูููููุฉ ูู Dashboard
- โ ุชู ุฅุฒุงูุฉ ุฌููุน ุงูููุชุฌุงุช ุงููุฒููุฉ: ุญุงูุธุฉ ูุงุชูุ ููุจูุฑุฏ ูููุงููููุ ุดุงุญู ุณุฑูุน
- โ ุงูุตูุญุฉ ุงูุขู ุชุนุฑุถ ููุท ุงูููุชุฌุงุช ุงูุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุงูุชุตููุฉ ุชุนูู ุญุณุจ `vendor_id` ุงูุฎุงุต ุจุงูุจุงุฆุน ุงููุณุฌู ุฏุฎููู
- โ ุญุงูุงุช ุงูุชุญููู ูุงูุญุงูุงุช ุงููุงุฑุบุฉ ุชุธูุฑ ุจุดูู ุตุญูุญ

### 2. ูููู ุงูุฑูุน ุงูุฌูุงุนู ุงูุฌุฏูุฏ
ุชู ุฅูุดุงุก `components/BulkUploadModal.tsx` ุจุงูููุฒุงุช ุงูุชุงููุฉ:
- โ ุฏุนู ูููุงุช CSV ู Excel (`.xlsx`, `.xls`)
- โ ูุญูู ุฐูู ููุฃุนูุฏุฉ (ูุฏุนู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ)
- โ ุชุนููู ุชููุงุฆู ูู `vendor_id` ูู ุงููุณุชุฎุฏู ุงูุญุงูู
- โ ุดุฑูุท ุชูุฏู ุฃุซูุงุก ุงูุฑูุน
- โ ุชูุฑูุฑ ููุตู ุจุงููุฌุงุญ ูุงููุดู
- โ ุชุญููู ูุงูุจ Excel ุฌุงูุฒ

### 3. ุงูุชูุงูู ูุน ุตูุญุฉ ุงูููุชุฌุงุช
- โ ุฒุฑ "ุฑูุน ููู" ูุฑุจูุท ุจุงูููุฏุงู
- โ ุชุญุฏูุซ ุชููุงุฆู ููููุชุฌุงุช ุจุนุฏ ุงูุฑูุน ุงููุงุฌุญ
- โ ูุงุฌูุฉ ุณูุณุฉ ูุน ุงูุชุตููู ุงูุญุงูู

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุฎุทูุฉ 1: ุงูุชุซุจูุช
```bash
pnpm install
```

### ุงูุฎุทูุฉ 2: ุชุญุถูุฑ ููู Excel
ูู ุจุฅูุดุงุก ููู Excel ุฃู CSV ุจุงูุฃุนูุฏุฉ ุงูุชุงููุฉ:

| Name | Description | Price | Old Price | Stock | Category | SKU |
|------|-------------|-------|-----------|-------|----------|-----|
| ูุงุชู ุขูููู 14 | ูุงุชู ุฐูู ูู ุขุจู | 3500 | 4000 | 10 | ุงูุฅููุชุฑูููุงุช | IP14-001 |
| ุณูุงุนุงุช ุจููุชูุซ | ุณูุงุนุงุช ูุงุณูููุฉ | 150 | 200 | 50 | ุงูุตูุชูุงุช | BT-002 |

**ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ:**
- `Name` ุฃู `ุงุณู` ุฃู `ุงุณู ุงูููุชุฌ` โ
- `Description` ุฃู `ูุตู` ุฃู `ุงููุตู` โ
- `Price` ุฃู `ุณุนุฑ` ุฃู `ุงูุณุนุฑ` โ
- `Stock` ุฃู `ูุฎุฒูู` ุฃู `ุงููุฎุฒูู` โ

**ุงูุฃุนูุฏุฉ ุงูุงุฎุชูุงุฑูุฉ:**
- `Old Price` ุฃู `ุงูุณุนุฑ ุงููุฏูู` โ๏ธ
- `Category` ุฃู `ูุฆุฉ` ุฃู `ุงููุฆุฉ` โ๏ธ
- `SKU` (ุณูุชู ุชูููุฏู ุชููุงุฆูุงู ุฅู ูู ููุฐูุฑ) โ๏ธ

### ุงูุฎุทูุฉ 3: ุฑูุน ุงูููู
1. ุงุฐูุจ ุฅูู: `/dashboard/vendor/products`
2. ุงูุฒู ููุฃุณูู ุญุชู ูุณู "ุฑูุน ุฌูุงุนู ููููุชุฌุงุช"
3. ุงุถุบุท ุนูู ุฒุฑ **"๐ ุฑูุน ููู"**
4. ุงุฎุชุฑ ููู CSV ุฃู Excel
5. ุงุถุบุท **"ุฑูุน ุงูููุชุฌุงุช"**
6. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุชุญููู

### ุงูุฎุทูุฉ 4: ุงูุชุญูู
- ุณุชุธูุฑ ุฑุณุงูุฉ ุจุนุฏุฏ ุงูููุชุฌุงุช ุงููุงุฌุญุฉ ูุงููุงุดูุฉ
- ุงูุฃุฎุทุงุก (ุฅู ููุฌุฏุช) ุณุชูุนุฑุถ ุจุงูุชูุตูู
- ุงูููุชุฌุงุช ุงูุฌุฏูุฏุฉ ุณุชุธูุฑ ููุฑุงู ูู ุงูุฌุฏูู

---

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ

### ููู: `components/BulkUploadModal.tsx`

**ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:**

#### 1. ูุญูู CSV
```typescript
const parseCSV = (text: string): ProductRow[] => {
  const lines = text.split('\n').filter(line => line.trim());
  const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
  
  // ูุฏุนู ุงูุฃุนูุฏุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
  if (header.includes('name') || header.includes('ุงุณู')) {
    product.name = value;
  }
  // ...
}
```

#### 2. ูุญูู Excel
```typescript
const parseExcel = async (file: File): Promise<ProductRow[]> => {
  const workbook = XLSX.read(data, { type: 'binary' });
  const jsonData = XLSX.utils.sheet_to_json(sheet);
  
  // ุชุญููู ุชููุงุฆู ููุตููู
  return jsonData.map((row: any) => ({
    name: row['Name'] || row['name'] || row['ุงุณู'],
    price: parseFloat(row['Price'] || row['price'] || 0),
    // ...
  }));
}
```

#### 3. ุงูุฑูุน ุฅูู Supabase
```typescript
await supabase.from('products').insert({
  vendor_id: vendorId,  // ๐ฅ ุชุนููู ุชููุงุฆู
  name: product.name,
  price: product.price,
  stock: product.stock,
  status: 'approved',    // ููุงูู ุนููู ุชููุงุฆูุงู
  sku: product.sku || `SKU-${Date.now()}-${i}`,
});
```

---

## ๐จ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูุงูุญููู

### โ ุฎุทุฃ: "ูู ูุชู ุงูุนุซูุฑ ุนูู ููุชุฌุงุช ุตุงูุญุฉ"
**ุงูุณุจุจ:** ููู ูุงุฑุบ ุฃู ุฃุนูุฏุฉ ุบูุฑ ุตุญูุญุฉ  
**ุงูุญู:** ุชุฃูุฏ ูู ูุฌูุฏ ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ (Name, Price, Stock, Description)

### โ ุฎุทุฃ: "Failed to insert product"
**ุงูุณุจุจ:** ุงูุชูุงู ูููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช  
**ุงูุญู:** ุชุญูู ูู:
- ุงูุณุนุฑ ููุฌุจ
- ุงููุฎุฒูู ุนุฏุฏ ุตุญูุญ
- ุงูุงุณู ุบูุฑ ูุงุฑุบ

### โ ุฎุทุฃ: "vendor_id cannot be null"
**ุงูุณุจุจ:** ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌู ูุจุงุฆุน  
**ุงูุญู:** ุชุฃูุฏ ูู ูุฌูุฏ ุณุฌู ูู ุฌุฏูู `vendors` ูุฑุชุจุท ุจู `user_id`

### โ ุฎุทุฃ: "Module 'xlsx' not found"
**ุงูุณุจุจ:** ููุชุจุฉ xlsx ุบูุฑ ูุซุจุชุฉ  
**ุงูุญู:**
```bash
pnpm install xlsx
```

---

## ๐ ูุซุงู ุนูู ููู Excel

ููููู ุชุญููู ุงููุงูุจ ูุจุงุดุฑุฉ ูู ุงูููุฏุงูุ ุฃู ุงุณุชุฎุฏู ูุฐุง ุงููุซุงู:

```csv
Name,Description,Price,Old Price,Stock,Category,SKU
"iPhone 14 Pro","ูุงุชู ุฐูู ุจูุงููุฑุง 48 ููุฌุง",4500,5000,15,"ุงูุฅููุชุฑูููุงุช","IP14P-001"
"ุณูุงุนุงุช AirPods","ุณูุงุนุงุช ูุงุณูููุฉ ูู ุขุจู",850,1000,30,"ุงูุตูุชูุงุช","AP-002"
"ุดุงุญู ุณุฑูุน 65W","ุดุงุญู ูุชุนุฏุฏ ุงูููุงูุฐ",120,,100,"ุงูุฅูุณุณูุงุฑุงุช","CH65-003"
"ุญุงูุธุฉ ุฌูุฏ ูุงุฎุฑุฉ","ุญุงูุธุฉ ุฌูุฏ ุทุจูุนู",45,60,200,"ุงูุฅูุณุณูุงุฑุงุช","LC-004"
```

**ููุงุญุธุงุช:**
- ุงุณุชุฎุฏู ุงูููุงุตู `,` ูููุตู ุจูู ุงูุฃุนูุฏุฉ
- ุงุณุชุฎุฏู ุงูุงูุชุจุงุณ `"..."` ูููุตูุต ุงูุชู ุชุญุชูู ุนูู ููุงุตู
- ุงุชุฑู ุงูุฎููุฉ ูุงุฑุบุฉ ููููู ุงูุงุฎุชูุงุฑูุฉ (ูุซู Old Price)

---

## ๐ฏ ุงุฎุชุจุงุฑ ุงูููุฒุฉ

### ุงุฎุชุจุงุฑ 1: ุฑูุน ููู CSV ุจุณูุท
```csv
Name,Description,Price,Stock
ููุชุฌ ุชุฌุฑูุจู,ูุตู ุชุฌุฑูุจู,100,50
```

### ุงุฎุชุจุงุฑ 2: ุฑูุน ููู Excel ุจุฃุนูุฏุฉ ุนุฑุจูุฉ
| ุงุณู ุงูููุชุฌ | ุงููุตู | ุงูุณุนุฑ | ุงููุฎุฒูู |
|------------|-------|-------|---------|
| ููุชุฌ 1 | ูุตู 1 | 50 | 100 |

### ุงุฎุชุจุงุฑ 3: ุฑูุน 100 ููุชุฌ ุฏูุนุฉ ูุงุญุฏุฉ
- โ ูุฌุจ ุฃู ูุธูุฑ ุดุฑูุท ุงูุชูุฏู
- โ ูุฌุจ ุฃู ูุชู ุงูุฑูุน ุฎูุงู 10-30 ุซุงููุฉ
- โ ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ุงููุฌุงุญ

---

## ๐ ุงูุฃูุงู

### ุชุนููู vendor_id ุงูุชููุงุฆู
```typescript
// ูู fetchVendorProducts()
const { data: vendorData } = await supabase
  .from('vendors')
  .select('id')
  .eq('user_id', user.id)
  .single();

// ูู BulkUploadModal
await supabase.from('products').insert({
  vendor_id: vendorId, // ๐ ูู ุงููุณุชุฎุฏู ุงูุญุงูู ููุท
  ...
});
```

**ููุงุฐุง ูุฐุง ุขููุ**
- ุงูุจุงุฆุน ูุง ูุณุชุทูุน ุชุนุฏูู `vendor_id` ูุฏููุงู
- ูุชู ุฌูุจู ูู ุฌูุณุฉ ุงููุณุชุฎุฏู ุงููุตุงุฏู ุนููู
- RLS ุชููุน ุงููุตูู ูููุชุฌุงุช ุงูุจุงุฆุนูู ุงูุขุฎุฑูู

---

## ๐ ุงูุฃุฏุงุก

### ูุนุฏูุงุช ุงูุฑูุน ุงููุชููุนุฉ:
- **10 ููุชุฌุงุช:** ~2 ุซุงููุฉ
- **100 ููุชุฌ:** ~15 ุซุงููุฉ
- **500 ููุชุฌ:** ~60 ุซุงููุฉ
- **1000 ููุชุฌ:** ~2 ุฏูููุฉ

### ุชุญุณููุงุช ูุณุชูุจููุฉ (ุงุฎุชูุงุฑูุฉ):
- โจ ุงูุฑูุน ุนูู ุฏูุนุงุช (batch insert)
- โจ ูุนุงูุฌุฉ ุฎูููุฉ ุจูุงุณุทุฉ Supabase Edge Functions
- โจ ุงูุชุญูู ูู ุงูุตุญุฉ ูุจู ุงูุฅุฏุฑุงุฌ
- โจ ูุนุงูุฌุฉ ุงูุตูุฑ ูู ุงูุฑูุงุจุท

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [x] ุฅุฒุงูุฉ ุงูุจูุงูุงุช ุงูููููุฉ ูู Dashboard
- [x] ุฅูุดุงุก ูููู BulkUploadModal
- [x] ุฑุจุท ุงูุฒุฑ ุจุงูููุฏุงู
- [x] ูุญูู CSV ูุนูู
- [x] ูุญูู Excel ูุนูู
- [x] ุชุนููู vendor_id ุชููุงุฆูุงู
- [x] ุดุฑูุท ุงูุชูุฏู ูุนูู
- [x] ุนุฑุถ ุงููุชุงุฆุฌ ูุงูุฃุฎุทุงุก
- [x] ุชุญุฏูุซ ุงูููุชุฌุงุช ุจุนุฏ ุงูุฑูุน
- [x] ุฏุนู ุงูุฃุนูุฏุฉ ุงูุนุฑุจูุฉ
- [x] ูุงูุจ Excel ูุงุจู ููุชุญููู
- [x] ุชุซุจูุช ููุชุจุฉ xlsx

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

1. **ุชุดุบูู fix-storage-rls-recursion.sql** ูุชูููู ุฑูุน ุงูุตูุฑ:
   ```sql
   -- ูู Supabase SQL Editor
   \i database/migrations/fix-storage-rls-recursion.sql
   ```

2. **ุฅุถุงูุฉ ุฑูุน ุงูุตูุฑ ูู ุงูุจูู ุฃุจููุฏ:**
   - ุฅุถุงูุฉ ุนููุฏ `Image URL` ูู ุงูููู
   - ุชูุฒูู ุงูุตูุฑุฉ ูู ุงูุฑุงุจุท
   - ุฑูุนูุง ุฅูู Supabase Storage
   - ุฑุจุทูุง ุจู `featured_image`

3. **ุฅุถุงูุฉ ูุนุงูุฌ ุฎููู:**
   - ุฅูุดุงุก Edge Function
   - ุฑูุน ุงูููู ุฅูู Storage
   - ูุนุงูุฌุชู ูู ุงูุฎูููุฉ
   - ุฅุดุนุงุฑ ุงููุณุชุฎุฏู ุนูุฏ ุงูุงูุชูุงุก

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู ุงููููุณูู ููุฃุฎุทุงุก
2. ุฑุงุฌุน ูุณู "ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ" ุฃุนูุงู
3. ุชุฃูุฏ ูู ุชุดุบูู SQL migration ููุชุฎุฒูู
4. ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุณุฌู ูู ุฌุฏูู `vendors`

---

**ุขุฎุฑ ุชุญุฏูุซ:** ููุงูุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 1.0.0
