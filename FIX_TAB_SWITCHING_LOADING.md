# โ ุญู ูุดููุฉ ุงูุชุญููู ุงููุงููุงุฆู ุนูุฏ ุงูุชุจุฏูู ุจูู ุงูุชุจููุจุงุช

## ๐ ุงููุดููุฉ
ุนูุฏ ุงูุงูุชูุงู ูู ุชุจููุจ ูุขุฎุฑ ูุงูุนูุฏุฉ:
- ุชุธูุฑ ุตูุญุฉ "ุฌุงุฑู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช"
- loading loop ูุง ูุชููู
- ูุฌุจ ุฅุบูุงู ุงูุชุจููุจ ููุชุญ ูุงุญุฏ ุฌุฏูุฏ

## ๐ ุงูุณุจุจ
1. **AuthContext**: `onAuthStateChange` ูุชูุนู ุนูุฏ ูู token refresh
2. **ProtectedRoute**: ูุนูุฏ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู ูู ูุฑุฉ
3. **ูุง ููุฌุฏ caching**: ุงูุจูุงูุงุช ุชูุฌูุจ ูู ูู ูุฑุฉ ุญุชู ูู ููุฌูุฏุฉ

## โ ุงูุญู ุงููุทุจู

### 1. AuthContext - ููุน ุงูุฌูุจ ุงููุชูุฑุฑ

```tsx
// ุฅุถุงูุฉ lastFetchTime ูุชุชุจุน ุขุฎุฑ ุฌูุจ
const [lastFetchTime, setLastFetchTime] = useState<number>(0);

// ูู onAuthStateChange:
- ุชุฌุงูู ุญุฏุซ TOKEN_REFRESHED (ูุง ูุฌูุจ ุงูุจูุงูุงุช)
- ููุน ุงูุฌูุจ ุฅุฐุง ุชู ุฎูุงู ุขุฎุฑ 30 ุซุงููุฉ
- ุฌูุจ ููุท ุนูุฏ SIGNED_IN ุฃู ุฃูู ูุฑุฉ

// Page Visibility API
- ููุน ุฅุนุงุฏุฉ ุงูุฌูุจ ุนูุฏ ุงูุนูุฏุฉ ููุชุจููุจ
- ุงูุจูุงูุงุช ูุญููุธุฉ ูู ุงูู state
```

### 2. ProtectedRoute - ููุน ุงูุชุญูู ุงููุชูุฑุฑ

```tsx
// ุฅุถุงูุฉ hasChecked flag
const [hasChecked, setHasChecked] = useState(false);

// ูู checkAuth:
- ุฅุฐุง ุชู ุงูุชุญูู ูุณุจูุงู โ ุชุฎุทู
- ุชุญูู ุณุฑูุน ูู ุงูุตูุงุญูุงุช ููุท
- setHasChecked(true) ุจุนุฏ ุงูุงูุชูุงุก
```

### 3. ุชุญุณููุงุช ุฅุถุงููุฉ
- ุชูููู timeout ูู 15s โ 10s
- ุชุญุณูู logging ููู debugging
- ุฅุถุงูุฉ checks ูุชุฌูุจ infinite loops

## ๐ ุงููุชูุฌุฉ

โ **ูุจู ุงูุฅุตูุงุญ:**
- ุนูุฏ ุงูุนูุฏุฉ ููุชุจููุจ โ loading ูุง ููุงุฆู
- 3-5 ุทูุจุงุช ููุงุนุฏุฉ ุงูุจูุงูุงุช
- UX ุณูุฆุฉ

โ **ุจุนุฏ ุงูุฅุตูุงุญ:**
- ุนูุฏ ุงูุนูุฏุฉ ููุชุจููุจ โ ูุชุญ ููุฑู
- 0 ุทูุจุงุช ุฅุถุงููุฉ (ุงูุจูุงูุงุช ูุญููุธุฉ)
- UX ุณูุณุฉ

## ๐งช ุงูุงุฎุชุจุงุฑ

1. ุงูุชุญ ููุญุฉ ุงูุชุญูู
2. ุงูุชูู ูุชุจููุจ ุขุฎุฑ
3. ุงุฑุฌุน ููุชุจููุจ ุงูุฃุตูู
4. โ ูุฌุจ ุฃู ุชูุชุญ ูุจุงุดุฑุฉ ุจุฏูู loading

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

- `contexts/AuthContext.tsx`
- `components/ProtectedRoute.tsx`
