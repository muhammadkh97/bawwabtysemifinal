-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
-- ๐ง ุณูุฑูุจุช ุชูุธูู ูุฅุตูุงุญ ูุธุงู ุงูุญุณุงุจุงุช ุงููุณุงุนุฏุฉ ููุจุงุฆุนูู
-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
-- ๐ ุงูุฌุฒุก 1: ูุญุต ุงููุถุน ุงูุญุงูู
-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

SELECT 
    '๐ ุงููุถุน ุงูุญุงูู' as info,
    vs.id,
    vs.vendor_id,
    vs.user_id,
    u.email as "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
    vs.status as "ุงูุญุงูุฉ",
    vs.permissions as "ุงูุตูุงุญูุงุช",
    vs.created_at as "ุชุงุฑูุฎ ุงูุฅูุดุงุก"
FROM vendor_staff vs
LEFT JOIN auth.users u ON vs.user_id = u.id
WHERE vs.user_id = '390e50d6-50de-4376-bddc-f394323284d8'
  AND vs.vendor_id = '6186f1a0-7f95-4d54-ac70-391127079a3f';

-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
-- โ ุงูุฌุฒุก 2: ุฅุนุงุฏุฉ ุชูุนูู ุงููุณุงุนุฏ ุงููุญุฐูู (ุงุฎุชูุงุฑู - ูู ุจุชุดุบููู ุฅุฐุง ุฃุฑุฏุช)
-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

-- ูู ุจุฅุฒุงูุฉ ุงูุชุนููู ุนู ุงูุณุทูุฑ ุงูุชุงููุฉ ุฅุฐุง ุฃุฑุฏุช ุฅุนุงุฏุฉ ุชูุนูู ุงููุณุงุนุฏ ูุฏููุงู:
/*
UPDATE vendor_staff
SET 
    status = 'active',
    permissions = '["view_orders", "manage_products"]',
    accepted_at = NOW(),
    invited_at = NOW(),
    updated_at = NOW()
WHERE user_id = '390e50d6-50de-4376-bddc-f394323284d8'
  AND vendor_id = '6186f1a0-7f95-4d54-ac70-391127079a3f'
  AND status = 'removed';

-- ุฅุถุงูุฉ ุฅุดุนุงุฑ ูููุณุชุฎุฏู
INSERT INTO notifications (
    user_id,
    type,
    title,
    message,
    link,
    priority
) VALUES (
    '390e50d6-50de-4376-bddc-f394323284d8',
    'staff_invitation',
    'ุฅุนุงุฏุฉ ุชูุนูู ุญุณุงุจู ุงููุณุงุนุฏ',
    'ุชู ุฅุนุงุฏุฉ ุชูุนููู ููุณุงุนุฏ ูู ูุชุฌุฑ ูุฑูู ูุฑูู',
    '/dashboard',
    'high'
);

SELECT 'โ ุชู ุฅุนุงุฏุฉ ุชูุนูู ุงููุณุงุนุฏ ุจูุฌุงุญ' as result;
*/

-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
-- ๐๏ธ ุงูุฌุฒุก 3: ุญุฐู ุงูุณุฌู ุงููุญุฐูู ููุงุฆูุงู (ุงุฎุชูุงุฑู - ุงุณุชุฎุฏู ุจุญุฐุฑ!)
-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

-- ุชุญุฐูุฑ: ูุฐุง ุณูุญุฐู ุงูุณุฌู ููุงุฆูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
-- ูู ุจุฅุฒุงูุฉ ุงูุชุนููู ููุท ุฅุฐุง ููุช ูุชุฃูุฏุงู ุฃูู ุชุฑูุฏ ุญุฐู ุงูุณุฌู ููุงุฆูุงู
/*
DELETE FROM vendor_staff
WHERE user_id = '390e50d6-50de-4376-bddc-f394323284d8'
  AND vendor_id = '6186f1a0-7f95-4d54-ac70-391127079a3f'
  AND status = 'removed';

SELECT '๐๏ธ ุชู ุญุฐู ุงูุณุฌู ููุงุฆูุงู' as result;
*/

-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
-- ๐ ุงูุฌุฒุก 4: ุงูุชุญูู ูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ
-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

SELECT 
    '๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ' as info,
    vs.id,
    vs.vendor_id,
    vs.user_id,
    u.email as "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู",
    vs.status as "ุงูุญุงูุฉ",
    vs.permissions as "ุงูุตูุงุญูุงุช",
    vs.created_at as "ุชุงุฑูุฎ ุงูุฅูุดุงุก",
    vs.updated_at as "ุชุงุฑูุฎ ุงูุชุญุฏูุซ"
FROM vendor_staff vs
LEFT JOIN auth.users u ON vs.user_id = u.id
WHERE vs.user_id = '390e50d6-50de-4376-bddc-f394323284d8'
  AND vs.vendor_id = '6186f1a0-7f95-4d54-ac70-391127079a3f';

-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
-- ๐ ุงูุฌุฒุก 5: ูุญุต ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ
-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

SELECT 
    '๐ ุงูุฅุดุนุงุฑุงุช' as info,
    n.id,
    n.type as "ุงูููุน",
    n.title as "ุงูุนููุงู",
    n.message as "ุงูุฑุณุงูุฉ",
    n.is_read as "ููุฑูุก",
    n.created_at as "ุชุงุฑูุฎ ุงูุฅูุดุงุก"
FROM notifications n
WHERE n.user_id = '390e50d6-50de-4376-bddc-f394323284d8'
  AND n.type = 'staff_invitation'
ORDER BY n.created_at DESC
LIMIT 5;

-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
-- ๐ ููุงุญุธุงุช ุงูุงุณุชุฎุฏุงู:
-- โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

/*
๐ ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู:

1. ุงูุฌุฒุก 1: ูู ุจุชุดุบููู ููุญุต ุงููุถุน ุงูุญุงูู ูููุณุงุนุฏ

2. ุงูุฌุฒุก 2 (ุงุฎุชูุงุฑู): ุฅุฐุง ุฃุฑุฏุช ุฅุนุงุฏุฉ ุชูุนูู ุงููุณุงุนุฏ ูุฏููุงู:
   - ูู ุจุฅุฒุงูุฉ /* ู */ ูู ุญูู ุงูููุฏ
   - ุดุบู ุงูุงุณุชุนูุงู

3. ุงูุฌุฒุก 3 (ุงุญุฐุฑ!): ููุท ุฅุฐุง ุฃุฑุฏุช ุญุฐู ุงูุณุฌู ููุงุฆูุงู:
   - ูู ุจุฅุฒุงูุฉ /* ู */ ูู ุญูู ุงูููุฏ
   - ุชุฃูุฏ ุฃูู ุชุฑูุฏ ุงูุญุฐู ุงูููุงุฆู
   - ุดุบู ุงูุงุณุชุนูุงู

4. ุงูุฌุฒุก 4: ูู ุจุชุดุบููู ููุชุญูู ูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

5. ุงูุฌุฒุก 5: ูู ุจุชุดุบููู ููุญุต ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ ูููุณุชุฎุฏู

๐ก ูุตูุญุฉ:
- ุงูุขู ุงูููุฏ ูู ุงูุชุทุจูู ูุชุนุงูู ูุน ุงูุญุงูุงุช ุงูุซูุงุซ ุชููุงุฆูุงู:
  โ ุฅุถุงูุฉ ูุณุงุนุฏ ุฌุฏูุฏ
  โ ุฅุนุงุฏุฉ ุชูุนูู ูุณุงุนุฏ ูุญุฐูู
  โ ุชุญุฏูุซ ุตูุงุญูุงุช ูุณุงุนุฏ ูุดุท
  
- ูุฐููุ ููููู ููุท ุชุดุบูู ุงูุฌุฒุก 1 ูููุญุตุ ุซู ุงุณุชุฎุฏุงู ุงูุชุทุจูู ูุจุงุดุฑุฉ
*/
