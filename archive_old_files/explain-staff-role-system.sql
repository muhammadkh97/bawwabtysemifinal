-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ” ÙØ­Øµ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
-- ğŸ“Š Ø§Ù„Ø¬Ø²Ø¡ 1: ÙØ­Øµ enum user_role
-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SELECT 
    'ğŸ“Š Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù…ØªØ§Ø­Ø©' as info,
    e.enumlabel as "Ø§Ù„Ø¯ÙˆØ±"
FROM pg_type t 
JOIN pg_enum e ON t.oid = e.enumtypid  
WHERE t.typname = 'user_role'
ORDER BY e.enumsortorder;

-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
-- ğŸ”§ Ø§Ù„Ø¬Ø²Ø¡ 2: Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø¯ÙˆØ± 'vendor_staff' Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù‡Ù„ Ù†Ø­ØªØ§Ø¬Ù‡ØŸ
-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

/*
ğŸ’¡ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©:
ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØŒ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù„Ø§ ÙŠØ­ØªØ§Ø¬ Ø¯ÙˆØ± Ø®Ø§Øµ ÙÙŠ enum user_role.

Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„ØµØ­ÙŠØ­:
1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ ÙŠØ¨Ù‚Ù‰ Ø¨Ø¯ÙˆØ± 'customer' ÙÙŠ Ø¬Ø¯ÙˆÙ„ users
2. Ù„ÙƒÙ† Ù„Ø¯ÙŠÙ‡ Ø³Ø¬Ù„ ÙÙŠ vendor_staff Ø¨Ø­Ø§Ù„Ø© 'active'
3. Ø¯Ø§Ù„Ø© get_current_user ØªØªØ­Ù‚Ù‚ Ù…Ù† vendor_staff
4. Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª Ø³Ø¬Ù„ Ù†Ø´Ø·ØŒ ØªØ¶Ø¹ is_vendor_staff = true
5. AuthContext ÙŠØªØ­Ù‚Ù‚ Ù…Ù† is_vendor_staff ÙˆÙŠØ¹Ø·ÙŠÙ‡ ØµÙ„Ø§Ø­ÙŠØ§Øª 'vendor'

Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù†Ù‡Ø¬ Ø§Ù„ØµØ­ÙŠØ­! âœ…
*/

-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
-- ğŸ“Š Ø§Ù„Ø¬Ø²Ø¡ 3: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯
-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

-- ÙØ­Øµ Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¬Ø¯ÙˆÙ„ users
SELECT 
    'ğŸ‘¤ ÙÙŠ Ø¬Ø¯ÙˆÙ„ users' as info,
    u.email,
    u.role as "Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ÙØ¹Ù„ÙŠ",
    'Ù‡Ø°Ø§ ØµØ­ÙŠØ­ âœ…' as "Ù…Ù„Ø§Ø­Ø¸Ø©"
FROM users u
WHERE u.id = '390e50d6-50de-4376-bddc-f394323284d8';

-- ÙØ­Øµ Ø­Ø§Ù„ØªÙ‡ ÙƒÙ…Ø³Ø§Ø¹Ø¯ ÙÙŠ vendor_staff
SELECT 
    'ğŸ¯ ÙÙŠ Ø¬Ø¯ÙˆÙ„ vendor_staff' as info,
    vs.status as "Ø§Ù„Ø­Ø§Ù„Ø©",
    vs.permissions as "Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª",
    'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù†Ø´Ø· âœ…' as "Ù…Ù„Ø§Ø­Ø¸Ø©"
FROM vendor_staff vs
WHERE vs.user_id = '390e50d6-50de-4376-bddc-f394323284d8'
  AND vs.status = 'active';

-- Ø§Ø®ØªØ¨Ø§Ø± Ø¯Ø§Ù„Ø© get_current_user (Ù…Ø­Ø§ÙƒØ§Ø©)
SELECT 
    'ğŸ”§ Ù†ØªÙŠØ¬Ø© get_current_user' as info,
    id,
    email,
    role as "Ø§Ù„Ø¯ÙˆØ± Ø§Ù„Ø£ØµÙ„ÙŠ",
    is_vendor_staff as "Ù‡Ù„ Ù‡Ùˆ Ù…Ø³Ø§Ø¹Ø¯ Ø¨Ø§Ø¦Ø¹ØŸ",
    staff_vendor_id as "Ù…Ø¹Ø±Ù Ø§Ù„Ù…ØªØ¬Ø±",
    CASE 
        WHEN is_vendor_staff THEN 'ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙØ¹Ø·Ù‰ Ø¯ÙˆØ± vendor âœ…'
        ELSE 'ÙŠØ¨Ù‚Ù‰ Ø¨Ø¯ÙˆØ±Ù‡ Ø§Ù„Ø­Ø§Ù„ÙŠ'
    END as "Ø§Ù„ØªÙˆØµÙŠØ©"
FROM get_current_user()
WHERE id = '390e50d6-50de-4376-bddc-f394323284d8';
